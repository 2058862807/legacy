<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexteraEstate - AI-Powered Estate Planning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .loading { animation: spin 2s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900">NexteraEstate</h1>
                    <span class="ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">AI-Powered</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#" onclick="showHome()" class="nav-link text-gray-700 hover:text-blue-600">Home</a>
                    <a href="#" onclick="showCreateWill()" class="nav-link text-gray-700 hover:text-blue-600">Create Will</a>
                    <a href="#" onclick="showDashboard()" class="nav-link text-gray-700 hover:text-blue-600">Dashboard</a>
                    <a href="#" onclick="showAIChat()" class="nav-link text-gray-700 hover:text-blue-600">AI Assistant</a>
                </nav>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div id="content" class="min-h-screen">

        <!-- Home Page -->
        <div id="home-page" class="page">
            <div class="gradient-bg text-white py-20">
                <div class="max-w-4xl mx-auto text-center px-4">
                    <h1 class="text-5xl font-bold mb-6">AI-Powered Estate Planning</h1>
                    <p class="text-xl mb-8">Create legally compliant wills with blockchain security and AI guidance</p>
                    <div class="flex justify-center space-x-4">
                        <button onclick="showCreateWill()" class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100">
                            Create Your Will Now
                        </button>
                        <button onclick="showAIChat()" class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600">
                            Talk to AI Assistant
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="py-16">
                <div class="max-w-6xl mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-12">Why Choose NexteraEstate?</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="text-center p-6 bg-white rounded-lg shadow">
                            <i class="fas fa-brain text-4xl text-blue-600 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-3">AI Legal Intelligence</h3>
                            <p>AutoLex Core provides triple-verified legal guidance with source citations</p>
                        </div>
                        <div class="text-center p-6 bg-white rounded-lg shadow">
                            <i class="fas fa-shield-alt text-4xl text-green-600 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-3">50-State Compliance</h3>
                            <p>Automatic validation of legal requirements across all US jurisdictions</p>
                        </div>
                        <div class="text-center p-6 bg-white rounded-lg shadow">
                            <i class="fas fa-link text-4xl text-purple-600 mb-4"></i>
                            <h3 class="text-xl font-semibold mb-3">Blockchain Security</h3>
                            <p>Gasless blockchain notarization - secure without crypto complexity</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Will Page -->
        <div id="create-will-page" class="page hidden">
            <div class="max-w-4xl mx-auto py-12 px-4">
                <h1 class="text-3xl font-bold mb-8 text-center">Create Your Will</h1>
                
                <div id="will-form-container">
                    <form id="will-form" class="bg-white rounded-lg shadow-lg p-8">
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                                <input type="text" id="fullName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                                <input type="email" id="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Address *</label>
                            <input type="text" id="address" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>

                        <div class="grid md:grid-cols-3 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                                <input type="text" id="city" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">State *</label>
                                <select id="state" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select State</option>
                                    <option value="CA">California</option>
                                    <option value="NY">New York</option>
                                    <option value="TX">Texas</option>
                                    <option value="FL">Florida</option>
                                    <option value="IL">Illinois</option>
                                    <option value="PA">Pennsylvania</option>
                                    <option value="OH">Ohio</option>
                                    <option value="GA">Georgia</option>
                                    <option value="NC">North Carolina</option>
                                    <option value="MI">Michigan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ZIP Code *</label>
                                <input type="text" id="zip" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>

                        <hr class="my-8">

                        <h3 class="text-xl font-semibold mb-4">Beneficiaries</h3>
                        <div id="beneficiaries-container">
                            <div class="beneficiary-row grid md:grid-cols-3 gap-4 mb-4">
                                <input type="text" placeholder="Beneficiary Name" class="beneficiary-name px-3 py-2 border border-gray-300 rounded-lg">
                                <select class="beneficiary-relationship px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="">Relationship</option>
                                    <option value="Spouse">Spouse</option>
                                    <option value="Child">Child</option>
                                    <option value="Parent">Parent</option>
                                    <option value="Sibling">Sibling</option>
                                    <option value="Friend">Friend</option>
                                    <option value="Charity">Charity</option>
                                </select>
                                <input type="number" placeholder="Percentage" class="beneficiary-percentage px-3 py-2 border border-gray-300 rounded-lg" min="1" max="100">
                            </div>
                        </div>
                        <button type="button" onclick="addBeneficiary()" class="text-blue-600 hover:text-blue-800 mb-6">+ Add Another Beneficiary</button>

                        <hr class="my-8">

                        <h3 class="text-xl font-semibold mb-4">Assets (Optional)</h3>
                        <div id="assets-container">
                            <div class="asset-row grid md:grid-cols-3 gap-4 mb-4">
                                <input type="text" placeholder="Asset Description" class="asset-description px-3 py-2 border border-gray-300 rounded-lg">
                                <select class="asset-type px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="">Asset Type</option>
                                    <option value="Bank Account">Bank Account</option>
                                    <option value="Real Estate">Real Estate</option>
                                    <option value="Investment Account">Investment Account</option>
                                    <option value="Vehicle">Vehicle</option>
                                    <option value="Personal Property">Personal Property</option>
                                    <option value="Business Interest">Business Interest</option>
                                </select>
                                <input type="number" placeholder="Estimated Value ($)" class="asset-value px-3 py-2 border border-gray-300 rounded-lg" min="0">
                            </div>
                        </div>
                        <button type="button" onclick="addAsset()" class="text-blue-600 hover:text-blue-800 mb-8">+ Add Another Asset</button>

                        <div class="flex justify-center">
                            <button type="submit" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700">
                                Create My Will
                            </button>
                        </div>
                    </form>
                </div>

                <div id="will-success" class="hidden bg-white rounded-lg shadow-lg p-8 text-center">
                    <i class="fas fa-check-circle text-6xl text-green-600 mb-6"></i>
                    <h2 class="text-3xl font-bold text-green-600 mb-4">Will Created Successfully!</h2>
                    <div id="will-details" class="text-left max-w-md mx-auto mb-6"></div>
                    <div class="space-y-4">
                        <button onclick="notarizeWill()" class="w-full bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700">
                            <i class="fas fa-link mr-2"></i>Notarize on Blockchain
                        </button>
                        <button onclick="showCreateWill()" class="w-full bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700">
                            Create Another Will
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page hidden">
            <div class="max-w-6xl mx-auto py-12 px-4">
                <h1 class="text-3xl font-bold mb-8">Your Dashboard</h1>
                
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-600">Wills Created</h3>
                        <p id="wills-count" class="text-3xl font-bold text-blue-600">-</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-600">Documents</h3>
                        <p id="documents-count" class="text-3xl font-bold text-green-600">-</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-600">Completion</h3>
                        <p id="completion-percentage" class="text-3xl font-bold text-purple-600">-</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-gray-600">Last Activity</h3>
                        <p id="last-activity" class="text-sm text-gray-600">-</p>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <h2 class="text-2xl font-bold mb-4">Recent Activity</h2>
                    <div id="recent-activity">
                        <p class="text-gray-600">Loading your recent activity...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Chat Page -->
        <div id="ai-chat-page" class="page hidden">
            <div class="max-w-4xl mx-auto py-12 px-4">
                <h1 class="text-3xl font-bold mb-8 text-center">AI Legal Assistant</h1>
                
                <div class="bg-white rounded-lg shadow-lg h-96 flex flex-col">
                    <div class="p-4 border-b">
                        <div class="flex items-center">
                            <i class="fas fa-robot text-2xl text-blue-600 mr-3"></i>
                            <div>
                                <h3 class="font-semibold">AutoLex Core</h3>
                                <p class="text-sm text-gray-600">AI Legal Intelligence System</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="chat-messages" class="flex-1 p-4 overflow-y-auto bg-gray-50">
                        <div class="ai-message bg-blue-100 p-3 rounded-lg mb-4">
                            <p><strong>AutoLex Core:</strong> Hello! I'm your AI legal assistant. I can help you with estate planning questions, state compliance requirements, and legal guidance. What would you like to know?</p>
                        </div>
                    </div>
                    
                    <div class="p-4 border-t">
                        <div class="flex space-x-2">
                            <input type="text" id="chat-input" placeholder="Ask me about estate planning, legal requirements, or any legal question..." 
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <button onclick="sendMessage()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="mt-6 grid md:grid-cols-2 gap-4">
                    <button onclick="askQuestion('What are the requirements for a valid will in my state?')" 
                            class="bg-gray-100 p-4 rounded-lg text-left hover:bg-gray-200">
                        <i class="fas fa-question-circle text-blue-600 mr-2"></i>
                        <strong>State Requirements:</strong> What are the requirements for a valid will in my state?
                    </button>
                    <button onclick="askQuestion('How do I choose beneficiaries for my will?')" 
                            class="bg-gray-100 p-4 rounded-lg text-left hover:bg-gray-200">
                        <i class="fas fa-users text-green-600 mr-2"></i>
                        <strong>Beneficiaries:</strong> How do I choose beneficiaries for my will?
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg text-center">
            <i class="fas fa-spinner text-4xl text-blue-600 loading mb-4"></i>
            <p class="text-lg font-semibold">Processing...</p>
            <p class="text-sm text-gray-600" id="loading-message">Please wait</p>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8001/api';
        let currentUser = null;
        let currentWillId = null;

        // Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
        }

        function showHome() { showPage('home-page'); }
        function showCreateWill() { showPage('create-will-page'); resetWillForm(); }
        function showDashboard() { showPage('dashboard-page'); loadDashboard(); }
        function showAIChat() { showPage('ai-chat-page'); }

        // Loading overlay
        function showLoading(message = 'Processing...') {
            document.getElementById('loading-message').textContent = message;
            document.getElementById('loading-overlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
        }

        // Will Form Management
        function addBeneficiary() {
            const container = document.getElementById('beneficiaries-container');
            const div = document.createElement('div');
            div.className = 'beneficiary-row grid md:grid-cols-3 gap-4 mb-4';
            div.innerHTML = `
                <input type="text" placeholder="Beneficiary Name" class="beneficiary-name px-3 py-2 border border-gray-300 rounded-lg">
                <select class="beneficiary-relationship px-3 py-2 border border-gray-300 rounded-lg">
                    <option value="">Relationship</option>
                    <option value="Spouse">Spouse</option>
                    <option value="Child">Child</option>
                    <option value="Parent">Parent</option>
                    <option value="Sibling">Sibling</option>
                    <option value="Friend">Friend</option>
                    <option value="Charity">Charity</option>
                </select>
                <input type="number" placeholder="Percentage" class="beneficiary-percentage px-3 py-2 border border-gray-300 rounded-lg" min="1" max="100">
            `;
            container.appendChild(div);
        }

        function addAsset() {
            const container = document.getElementById('assets-container');
            const div = document.createElement('div');
            div.className = 'asset-row grid md:grid-cols-3 gap-4 mb-4';
            div.innerHTML = `
                <input type="text" placeholder="Asset Description" class="asset-description px-3 py-2 border border-gray-300 rounded-lg">
                <select class="asset-type px-3 py-2 border border-gray-300 rounded-lg">
                    <option value="">Asset Type</option>
                    <option value="Bank Account">Bank Account</option>
                    <option value="Real Estate">Real Estate</option>
                    <option value="Investment Account">Investment Account</option>
                    <option value="Vehicle">Vehicle</option>
                    <option value="Personal Property">Personal Property</option>
                    <option value="Business Interest">Business Interest</option>
                </select>
                <input type="number" placeholder="Estimated Value ($)" class="asset-value px-3 py-2 border border-gray-300 rounded-lg" min="0">
            `;
            container.appendChild(div);
        }

        function resetWillForm() {
            document.getElementById('will-form-container').classList.remove('hidden');
            document.getElementById('will-success').classList.add('hidden');
            document.getElementById('will-form').reset();
        }

        // Will Creation
        document.getElementById('will-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            showLoading('Creating your will...');

            try {
                const formData = new FormData(e.target);
                
                // Create user first
                const userData = {
                    email: document.getElementById('email').value,
                    name: document.getElementById('fullName').value
                };

                const userResponse = await fetch(`${API_BASE}/users`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(userData)
                });

                if (!userResponse.ok) {
                    throw new Error('Failed to create user');
                }

                currentUser = await userResponse.json();

                // Collect beneficiaries
                const beneficiaries = [];
                document.querySelectorAll('.beneficiary-row').forEach(row => {
                    const name = row.querySelector('.beneficiary-name').value.trim();
                    const relationship = row.querySelector('.beneficiary-relationship').value;
                    const percentage = row.querySelector('.beneficiary-percentage').value;
                    
                    if (name && relationship && percentage) {
                        beneficiaries.push({
                            name: name,
                            relationship: relationship,
                            percentage: parseInt(percentage)
                        });
                    }
                });

                // Collect assets
                const assets = [];
                document.querySelectorAll('.asset-row').forEach(row => {
                    const description = row.querySelector('.asset-description').value.trim();
                    const type = row.querySelector('.asset-type').value;
                    const value = row.querySelector('.asset-value').value;
                    
                    if (description && type && value) {
                        assets.push({
                            type: type,
                            description: description,
                            value: parseFloat(value)
                        });
                    }
                });

                // Create will
                const willData = {
                    state: document.getElementById('state').value,
                    personal_info: {
                        name: document.getElementById('fullName').value,
                        address: document.getElementById('address').value,
                        city: document.getElementById('city').value,
                        state: document.getElementById('state').value,
                        zip: document.getElementById('zip').value
                    },
                    beneficiaries: beneficiaries,
                    assets: assets
                };

                const willResponse = await fetch(`${API_BASE}/wills?user_email=${encodeURIComponent(userData.email)}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(willData)
                });

                if (!willResponse.ok) {
                    const errorText = await willResponse.text();
                    throw new Error(`Will creation failed: ${errorText}`);
                }

                const willResult = await willResponse.json();
                currentWillId = willResult.id;

                // Show success
                document.getElementById('will-form-container').classList.add('hidden');
                document.getElementById('will-details').innerHTML = `
                    <div class="space-y-2">
                        <p><strong>Will ID:</strong> ${willResult.id}</p>
                        <p><strong>State:</strong> ${willResult.state}</p>
                        <p><strong>Completion:</strong> ${willResult.completion_percentage}%</p>
                        <p><strong>Created:</strong> ${new Date(willResult.created_at).toLocaleDateString()}</p>
                    </div>
                `;
                document.getElementById('will-success').classList.remove('hidden');

            } catch (error) {
                alert(`Error creating will: ${error.message}`);
                console.error('Will creation error:', error);
            } finally {
                hideLoading();
            }
        });

        // Blockchain Notarization
        async function notarizeWill() {
            if (!currentWillId) {
                alert('No will selected for notarization');
                return;
            }

            showLoading('Notarizing on blockchain...');

            try {
                const response = await fetch(`${API_BASE}/gasless-notary/notarize`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        document_id: currentWillId,
                        document_type: 'will',
                        user_email: currentUser.email
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Notarization failed: ${errorText}`);
                }

                const result = await response.json();
                alert(`âœ… Will successfully notarized on blockchain!\\n\\nTransaction Hash: ${result.transaction_hash}\\nBlockchain Network: ${result.network}`);

            } catch (error) {
                alert(`Error notarizing will: ${error.message}`);
                console.error('Notarization error:', error);
            } finally {
                hideLoading();
            }
        }

        // Dashboard
        async function loadDashboard() {
            const email = prompt('Enter your email to view dashboard:');
            if (!email) return;

            showLoading('Loading dashboard...');

            try {
                const response = await fetch(`${API_BASE}/user/dashboard-stats?user_email=${encodeURIComponent(email)}`);
                
                if (!response.ok) {
                    throw new Error('Failed to load dashboard data');
                }

                const data = await response.json();
                
                document.getElementById('wills-count').textContent = data.wills_count;
                document.getElementById('documents-count').textContent = data.documents_count;
                document.getElementById('completion-percentage').textContent = data.completion_percentage + '%';
                document.getElementById('last-activity').textContent = new Date(data.last_activity).toLocaleDateString();

                document.getElementById('recent-activity').innerHTML = `
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <span>Wills Created: ${data.wills_count}</span>
                            <span class="text-green-600 font-semibold">Active</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <span>Last Activity: ${new Date(data.last_activity).toLocaleDateString()}</span>
                            <span class="text-blue-600 font-semibold">Recent</span>
                        </div>
                    </div>
                `;

            } catch (error) {
                document.getElementById('recent-activity').innerHTML = `
                    <p class="text-red-600">Error loading dashboard: ${error.message}</p>
                `;
                console.error('Dashboard error:', error);
            } finally {
                hideLoading();
            }
        }

        // AI Chat
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            // Add user message to chat
            addChatMessage('user', message);
            input.value = '';

            showLoading('AI is thinking...');

            try {
                const response = await fetch(`${API_BASE}/ai-team/communicate`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: message,
                        recipient: 'autolex',
                        priority: 'normal'
                    })
                });

                if (!response.ok) {
                    throw new Error('AI communication failed');
                }

                const data = await response.json();
                
                // Extract AI response
                let aiResponse = 'I apologize, but I encountered an issue processing your request.';
                if (data.responses && data.responses.autolex_core) {
                    aiResponse = data.responses.autolex_core.response;
                } else if (data.responses && Object.keys(data.responses).length > 0) {
                    const firstResponse = Object.values(data.responses)[0];
                    aiResponse = firstResponse.response || aiResponse;
                }

                addChatMessage('ai', aiResponse);

            } catch (error) {
                addChatMessage('ai', `I apologize, but I encountered an error: ${error.message}`);
                console.error('AI chat error:', error);
            } finally {
                hideLoading();
            }
        }

        function addChatMessage(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'user-message bg-blue-600 text-white p-3 rounded-lg mb-4 ml-12';
                messageDiv.innerHTML = `<p><strong>You:</strong> ${message}</p>`;
            } else {
                messageDiv.className = 'ai-message bg-blue-100 p-3 rounded-lg mb-4 mr-12';
                messageDiv.innerHTML = `<p><strong>AutoLex Core:</strong> ${message}</p>`;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function askQuestion(question) {
            document.getElementById('chat-input').value = question;
            sendMessage();
        }

        // Enter key support for chat
        document.getElementById('chat-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize
        showHome();
    </script>
</body>
</html>